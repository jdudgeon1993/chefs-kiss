<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chef's Kiss â€” Cozy Kitchen Management</title>
  <meta name="version" content="5.0">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="landing.css">
  <link rel="stylesheet" href="shopping-focus-mode.css">
  <link rel="icon" type="image/png" href="assets/favicon.png" />


  <!-- Supabase JS Client (Realtime subscriptions) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>

  <!-- Core JS -->
  <script src="js/config.js"></script>
  <script src="js/api.js"></script>
  <script src="js/validation.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/settings.js"></script>
  <script src="js/realtime.js"></script>
  <script defer src="js/app.js"></script>

  <!-- Other -->
  <script src="js/shopping-focus-mode.js"></script>
  <script src="js/landing.js"></script>
</head>
<body>

  <!-- LANDING PAGE (shown when not authenticated) -->
  <div class="landing-page" id="landing-page">

    <!-- HERO SECTION -->
    <section class="landing-hero">
      <div class="landing-logo">ğŸ³</div>
      <h1 class="landing-title">Chef's Kiss</h1>
      <p class="landing-tagline">simple tools for the heart of your home</p>

      <!-- AUTH FORM -->
      <div class="landing-auth-card">
        <!-- Sign In Form (default) -->
        <div class="landing-auth-form" id="landing-signin-form">
          <h3 class="landing-auth-title">Welcome Back</h3>

          <div class="landing-form-group">
            <label for="landing-email">Email</label>
            <input type="email" id="landing-email" placeholder="your@email.com" autocomplete="email">
          </div>

          <div class="landing-form-group">
            <label for="landing-password">Password</label>
            <input type="password" id="landing-password" placeholder="Enter your password" autocomplete="current-password">
          </div>

          <div id="landing-auth-error" class="landing-auth-error" role="alert" aria-live="polite"></div>

          <button class="landing-btn landing-btn-primary" id="landing-signin-btn">Sign In</button>

          <p class="landing-auth-toggle">
            Don't have an account? <a href="#" id="landing-show-signup">Create one</a>
          </p>
        </div>

        <!-- Create Account Form (hidden by default) -->
        <div class="landing-auth-form" id="landing-signup-form" style="display: none;">
          <h3 class="landing-auth-title">Create Account</h3>

          <div class="landing-form-group">
            <label for="landing-signup-email">Email</label>
            <input type="email" id="landing-signup-email" placeholder="your@email.com" autocomplete="email">
          </div>

          <div class="landing-form-group">
            <label for="landing-signup-password">Password</label>
            <input type="password" id="landing-signup-password" placeholder="Create a password" autocomplete="new-password">
          </div>

          <div class="landing-form-group">
            <label for="landing-signup-confirm">Confirm Password</label>
            <input type="password" id="landing-signup-confirm" placeholder="Confirm your password" autocomplete="new-password">
          </div>

          <div id="landing-signup-error" class="landing-auth-error" role="alert" aria-live="polite"></div>

          <button class="landing-btn landing-btn-primary" id="landing-signup-btn">Create Account</button>

          <p class="landing-auth-toggle">
            Already have an account? <a href="#" id="landing-show-signin">Sign in</a>
          </p>
        </div>

        <!-- Demo Option -->
        <div class="landing-divider">
          <span>or</span>
        </div>

        <button class="landing-btn landing-btn-demo" id="landing-try-demo">
          <span class="landing-demo-icon">ğŸ®</span>
          Try Demo Account
        </button>
      </div>

      <p class="landing-scroll-hint">â†“ Scroll to explore features â†“</p>
    </section>

    <!-- FEATURES SECTION -->
    <section class="landing-features">
      <h2 class="landing-section-title">Everything You Need to Run Your Kitchen</h2>

      <div class="landing-features-grid">

        <!-- Feature 1: Pantry Tracking -->
        <div class="landing-feature-card">
          <span class="landing-feature-icon">ğŸº</span>
          <h3 class="landing-feature-title">Smart Pantry</h3>
          <p class="landing-feature-description">
            Track ingredients across multiple locations (pantry, fridge, freezer). Never forget what you have or where it is.
          </p>
        </div>

        <!-- Feature 2: Recipe Box -->
        <div class="landing-feature-card">
          <span class="landing-feature-icon">ğŸ“–</span>
          <h3 class="landing-feature-title">Recipe Box</h3>
          <p class="landing-feature-description">
            Save your favorite recipes with photos, tags, and notes. Beautiful vintage recipe card design.
          </p>
        </div>

        <!-- Feature 3: Meal Planning -->
        <div class="landing-feature-card">
          <span class="landing-feature-icon">ğŸ“…</span>
          <h3 class="landing-feature-title">Meal Planner</h3>
          <p class="landing-feature-description">
            Plan your week on a visual calendar. Schedule breakfast, lunch, dinner, and snacks with ease.
          </p>
        </div>

        <!-- Feature 4: Shopping List -->
        <div class="landing-feature-card">
          <span class="landing-feature-icon">ğŸ›’</span>
          <h3 class="landing-feature-title">Auto Shopping List</h3>
          <p class="landing-feature-description">
            Generate shopping lists automatically from your meal plan and pantry stock. Never forget an ingredient.
          </p>
        </div>

        <!-- Feature 5: Real-time Sync -->
        <div class="landing-feature-card">
          <span class="landing-feature-icon">ğŸ”„</span>
          <h3 class="landing-feature-title">Multi-Device Sync</h3>
          <p class="landing-feature-description">
            Work on phone, tablet, or desktop. All your data syncs in real-time across devices.
          </p>
        </div>

        <!-- Feature 6: Household Sharing -->
        <div class="landing-feature-card">
          <span class="landing-feature-icon">ğŸ‘¥</span>
          <h3 class="landing-feature-title">Household Sharing</h3>
          <p class="landing-feature-description">
            Share your kitchen with family members. Everyone stays in sync with the same pantry and meal plan.
          </p>
        </div>

        <!-- Feature 7: Offline Mode -->
        <div class="landing-feature-card">
          <span class="landing-feature-icon">ğŸ“¡</span>
          <h3 class="landing-feature-title">Offline-First</h3>
          <p class="landing-feature-description">
            Works without internet. Add items offline and they'll sync automatically when you're back online.
          </p>
        </div>

        <!-- Feature 8: Bulk Entry -->
        <div class="landing-feature-card">
          <span class="landing-feature-icon">âš¡</span>
          <h3 class="landing-feature-title">Quick Setup</h3>
          <p class="landing-feature-description">
            Bulk entry tool for adding many items at once. Perfect for initial pantry setup or after big shopping trips.
          </p>
        </div>

        <!-- Feature 9: Recipe Tags -->
        <div class="landing-feature-card">
          <span class="landing-feature-icon">ğŸ·ï¸</span>
          <h3 class="landing-feature-title">Smart Tags</h3>
          <p class="landing-feature-description">
            Organize recipes with custom tags. Filter by cuisine, dietary needs, cook time, or your own categories.
          </p>
        </div>

        <!-- Feature 10: Ready Recipes -->
        <div class="landing-feature-card">
          <span class="landing-feature-icon">âœ¨</span>
          <h3 class="landing-feature-title">Ready to Cook</h3>
          <p class="landing-feature-description">
            See which recipes you can make right now with your current pantry stock. No guessing!
          </p>
        </div>

        <!-- Feature 11: Photos -->
        <div class="landing-feature-card">
          <span class="landing-feature-icon">ğŸ“¸</span>
          <h3 class="landing-feature-title">Recipe Photos</h3>
          <p class="landing-feature-description">
            Upload photos of your dishes. Auto-compressed and stored in the cloud for quick loading.
          </p>
        </div>

        <!-- Feature 12: Free -->
        <div class="landing-feature-card">
          <span class="landing-feature-icon">ğŸ’</span>
          <h3 class="landing-feature-title">100% Free</h3>
          <p class="landing-feature-description">
            No subscription, no trial period, no hidden fees. All features available to everyone, always.
          </p>
        </div>

      </div>
    </section>

    <!-- HOW IT WORKS SECTION -->
    <section class="landing-how-it-works">
      <h2 class="landing-section-title">How It Works</h2>

      <div class="landing-steps">
        <div class="landing-step">
          <div class="landing-step-number">1</div>
          <h3 class="landing-step-title">Create Account</h3>
          <p class="landing-step-description">
            Sign up with email. Create or join a household to share with family.
          </p>
        </div>

        <div class="landing-step">
          <div class="landing-step-number">2</div>
          <h3 class="landing-step-title">Add Your Pantry</h3>
          <p class="landing-step-description">
            Use quick setup to add items in bulk, or add them one by one as you cook.
          </p>
        </div>

        <div class="landing-step">
          <div class="landing-step-number">3</div>
          <h3 class="landing-step-title">Plan & Cook</h3>
          <p class="landing-step-description">
            Add recipes, plan meals on the calendar, and let us generate your shopping list.
          </p>
        </div>
      </div>
    </section>

    <!-- FOOTER SECTION -->
    <section class="landing-footer">
      <div class="landing-footer-cta">
        <h2 class="landing-footer-title">Ready to get started?</h2>
        <p class="landing-footer-text">Join thousands of households managing their kitchens with Chef's Kiss</p>
        <a href="#" class="landing-scroll-to-top" id="landing-scroll-top">â†‘ Sign In or Try Demo</a>
      </div>
    </section>

  </div>

  <!-- OFFLINE INDICATOR BANNER -->
  <div id="offline-banner" class="offline-banner" style="display: none;">
    ğŸ“¡ Offline Mode â€” Changes will sync when you're back online
  </div>

  <!-- SECTION NAVIGATION - Hidden Radio Inputs (CSS-only approach) -->
  <input type="radio" name="section-nav" id="nav-recipes" class="section-nav-input" checked>
  <input type="radio" name="section-nav" id="nav-pantry" class="section-nav-input">
  <input type="radio" name="section-nav" id="nav-shopping" class="section-nav-input">
  <input type="radio" name="section-nav" id="nav-meal-planning" class="section-nav-input">
  <input type="radio" name="section-nav" id="nav-onboarding" class="section-nav-input">

  <!-- LEFT SIDEBAR NAVIGATION (Desktop) -->
  <nav class="sidebar-nav" aria-label="Main navigation">
    <label for="nav-recipes" class="nav-btn" title="Recipes" aria-label="Recipes">
      ğŸ³
    </label>
    <label for="nav-pantry" class="nav-btn" title="Pantry" aria-label="Pantry">
      ğŸº
    </label>
    <label for="nav-shopping" class="nav-btn" title="Shopping" aria-label="Shopping">
      ğŸ›’
    </label>
    <label for="nav-meal-planning" class="nav-btn" title="Meal Planning" aria-label="Meal Planning">
      ğŸ“…
    </label>
  </nav>

  <!-- BOTTOM NAVIGATION (Mobile) -->
  <nav class="bottom-nav" aria-label="Main navigation">
    <label for="nav-recipes" class="nav-btn" title="Recipes" aria-label="Recipes">
      ğŸ³
    </label>
    <label for="nav-pantry" class="nav-btn" title="Pantry" aria-label="Pantry">
      ğŸº
    </label>
    <label for="nav-shopping" class="nav-btn" title="Shopping" aria-label="Shopping">
      ğŸ›’
    </label>
    <label for="nav-meal-planning" class="nav-btn" title="Meal Planning" aria-label="Meal Planning">
      ğŸ“…
    </label>
  </nav>

  <!-- SHOPPING LIST SIDEBAR - Now hidden, moved to main content -->
  <aside class="shopping-sidebar" id="shopping-sidebar" style="display: none;">
  </aside>

  <!-- UNIFIED PURPLE HEADER BAR -->
  <header class="site-header">
    <div class="header-left">
      <h1 class="header-brand">
        Chef's Kiss
        <span class="header-brand-underline"></span>
      </h1>
    </div>
    <div class="header-right">
      <div class="header-datetime">
        <span id="utility-date">SUN, JAN 11</span>
        <span class="datetime-separator">â€¢</span>
        <span id="utility-time">09:39 AM</span>
      </div>
      <nav class="header-nav">
        <button class="btn-header-icon" id="btn-account" title="Account & Households">ğŸ‘¤</button>
        <button class="btn-header-icon" id="btn-onboarding" title="Quick Setup">ğŸ“‹</button>
        <button class="btn-header-icon" id="btn-settings" title="Settings">âš™ï¸</button>
      </nav>
    </div>
  </header>

  <!-- DEMO MODE BANNER (shown only in demo mode) -->
  <div id="demo-banner" class="demo-banner" style="display: none;">
    <span class="demo-banner-text">
      ğŸ‰ <strong>Demo Mode</strong> â€” You're exploring with sample data.
      <a href="#" id="demo-exit-link" style="color: white; text-decoration: underline; margin-left: 0.5rem;">Exit Demo</a>
    </span>
  </div>

  <!-- MAIN CONTENT AREA -->
  <div class="main-content">

    <!-- FLOATING ACTION BUTTON - Recipes -->
    <div class="floating-action-menu fab-recipes" id="fab-recipes">
      <button class="floating-action-btn" id="fab-btn-recipe" title="Add Recipe" onclick="document.getElementById('fab-add-recipe').click()">
        +
      </button>
    </div>

    <!-- FLOATING ACTION BUTTON - Pantry -->
    <div class="floating-action-menu fab-pantry" id="fab-pantry">
      <button class="floating-action-btn" id="fab-btn-pantry" title="Add Pantry Item" onclick="document.getElementById('btn-new-pantry-entry').click()">
        +
      </button>
    </div>

    <!-- FLOATING ACTION BUTTON - Shopping -->
    <div class="floating-action-menu fab-shopping" id="fab-shopping">
      <button class="floating-action-btn" id="fab-btn-shopping" title="Add Shopping Item" onclick="document.getElementById('btn-add-custom-item').click()">
        +
      </button>
    </div>

    <!-- FLOATING ACTION BUTTON - Meal Planning (Hidden - use main calendar section) -->
    <div class="floating-action-menu fab-meal-planning" id="fab-meal-planning" style="display: none;">
      <button class="floating-action-btn" id="fab-btn-meal" title="Plan Meal" onclick="if(window.openPlannerModal) window.openPlannerModal()">
        +
      </button>
    </div>

    <!-- Hidden elements to maintain app.js compatibility -->
    <div style="position: absolute; opacity: 0; pointer-events: none;">
      <button id="fab-add-ingredient" style="display: none;"></button>
      <button id="fab-add-recipe" style="display: none;"></button>
      <button id="fab-add-meal" style="display: none;"></button>
    </div>

    <!-- RECIPES SECTION -->
    <section class="recipes-section" id="recipes-section">
      <div class="recipes-header">
        <h2>RECIPE BOX</h2>
      </div>

      <!-- Recipe search bar and sort -->
      <div class="recipes-controls" style="display: grid; grid-template-columns: 1fr auto; gap: 0.75rem; margin-bottom: 1rem;">
        <input type="text" id="recipe-search-ledger" placeholder="Search recipes..." class="recipe-search-input">
        <select id="recipe-sort-select" class="recipe-sort-select" style="padding: 0.75rem 1rem; border: 1px solid rgba(197,184,165,0.3); border-radius: 8px; font-size: 0.9rem; background: white; color: var(--color-text-primary); font-family: inherit; cursor: pointer;">
          <option value="a-z">Sort: A-Z</option>
          <option value="z-a">Sort: Z-A</option>
          <option value="favorites">Sort: Favorites First</option>
          <option value="recent">Sort: Recent</option>
        </select>
      </div>

      <!-- Horizontal scrolling category filters -->
      <div class="recipe-filters-container">
        <div class="recipe-filter-pills" id="recipe-filter-pills">
          <!-- Category filter pills will be rendered here -->
        </div>
      </div>

      <!-- Tag filters -->
      <div class="recipe-tag-filters-container" style="margin-bottom: 1rem;">
        <div class="recipe-tag-filter-pills" id="recipe-tag-filter-pills" style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
          <!-- Tag filter pills will be rendered here -->
        </div>
      </div>

      <!-- Recipe grid -->
      <div class="recipes-grid" id="recipes-grid">
        <!-- Recipe cards will be rendered here -->
      </div>

      <!-- Hidden: App.js renders recipe cards here (for data only) -->
      <div id="recipe-list" class="recipe-list" style="display: none;"></div>
    </section>

    <!-- MASTER PANTRY SECTION -->
    <section class="pantry-section" id="pantry-section">
      <div class="pantry-header">
        <h2>PANTRY LEDGER</h2>
      </div>

      <!-- Pantry search and filters -->
      <div class="pantry-controls">
        <input type="text" id="pantry-search-ledger" placeholder="Search ingredients..." class="pantry-search-input">
        <select id="filter-category-ledger" class="pantry-filter-select">
          <option value="">All categories</option>
          <option value="Meat">Meat</option>
          <option value="Dairy">Dairy</option>
          <option value="Produce">Produce</option>
          <option value="Pantry">Pantry staples</option>
          <option value="Frozen">Frozen</option>
          <option value="Spices">Spices</option>
          <option value="Other">Other</option>
        </select>
        <select id="sort-pantry-ledger" class="pantry-sort-select">
          <option value="alpha">A-Z</option>
          <option value="lowStock">Low Stock First</option>
          <option value="expiring">Expiring Soon</option>
          <option value="recent">Recently Added</option>
        </select>
      </div>

      <!-- Master Pantry Table View -->
      <div id="pantry-ledger-display" class="pantry-ledger-display">
        <!-- Categories with tables will be rendered here -->
      </div>

      <!-- Hidden: App.js renders here (for data only) -->
      <div id="pantry-display" class="pantry-display" style="display: none;"></div>

      <button class="btn btn-new-entry" id="btn-new-pantry-entry">
        + NEW ENTRY
      </button>
    </section>

    <!-- SHOPPING LIST SECTION -->
    <section class="shopping-section" id="shopping-section">
      <div class="shopping-header">
        <h2>SHOPPING LIST</h2>
        <button class="btn-refresh" onclick="refreshShoppingList()" title="Refresh shopping list">ğŸ”„</button>
      </div>

      <div class="shopping-add-inline">
        <input
          type="text"
          id="user-item-name"
          placeholder="Add item..."
        >
        <button class="btn-add-icon" id="btn-add-custom-item" title="Add custom item">
          +
        </button>
      </div>

      <div id="shopping-list" class="shopping-list">
        <!-- Shopping items injected here -->
      </div>

      <div class="shopping-actions">
        <button class="btn btn-focus-mode-large" onclick="enterShoppingFocusMode()">
          ğŸ›’ SHOPPING MODE
        </button>
        <button class="btn btn-primary btn-block" id="btn-checkout">
          Checkout
        </button>
      </div>
    </section>

    <!-- MEAL PLANNING SECTION -->
    <section class="meal-planning-section" id="meal-planning-section">
      <div class="meal-planning-header">
        <h2>MEAL PLANNER</h2>
      </div>

      <!-- Calendar Navigation -->
      <div class="calendar-nav">
        <button class="btn-calendar-nav" id="btn-prev-period">â† Prev</button>
        <h3 class="calendar-period-label" id="calendar-period-label">Loading...</h3>
        <button class="btn-calendar-nav" id="btn-next-period">Next â†’</button>
      </div>

      <!-- Calendar Grid -->
      <div class="calendar-container" id="calendar-container">
        <!-- Calendar will be rendered here -->
      </div>

      <!-- Scheduled Recipes List -->
      <div class="scheduled-recipes-section">
        <h3>Scheduled Meals</h3>
        <div id="scheduled-recipes-list" class="scheduled-recipes-list">
          <!-- Scheduled recipes will be rendered here -->
        </div>
      </div>
    </section>

    <!-- ONBOARDING SECTION (Bulk Entry) -->
    <section class="onboarding-section" id="onboarding-section">
      <div class="onboarding-header">
        <div class="onboarding-title-row">
          <h2>BULK PANTRY ENTRY</h2>
          <div class="onboarding-status">
            <span id="onboarding-draft-status">Draft auto-saved</span>
            <span id="onboarding-item-count">0 items entered</span>
          </div>
        </div>
        <button class="btn-exit-onboarding" id="btn-exit-onboarding" title="Exit Bulk Entry">
          â† Back to Pantry
        </button>
      </div>

      <div class="onboarding-content">
        <div class="onboarding-instructions">
          <p>ğŸ’¡ <strong>Tips:</strong> Press Tab to move between cells â€¢ Enter to go to next row â€¢ Paste from Excel works! â€¢ Changes sync across all your devices in real-time.</p>
        </div>

        <div class="bulk-entry-table-wrapper">
          <table id="bulk-entry-table-live" class="bulk-entry-table">
            <thead>
              <tr>
                <th style="width: 30%;">Item Name</th>
                <th style="width: 10%;">Quantity</th>
                <th style="width: 10%;">Unit</th>
                <th style="width: 20%;">Category</th>
                <th style="width: 20%;">Location</th>
                <th style="width: 10%;"></th>
              </tr>
            </thead>
            <tbody id="bulk-entry-tbody-live">
              <!-- Rows will be dynamically generated -->
            </tbody>
          </table>
        </div>

        <div class="onboarding-actions">
          <div class="onboarding-actions-left">
            <button class="btn btn-secondary" id="btn-add-rows-live">+ Add 5 Rows</button>
            <button class="btn btn-secondary" id="btn-clear-all-live">Clear All</button>
          </div>
          <div class="onboarding-actions-right">
            <button class="btn btn-primary" id="btn-save-all-items">
              <span id="btn-save-text">Save & Add All Items</span>
            </button>
          </div>
        </div>
      </div>
    </section>

  </div> <!-- end main-content -->

  <!-- MODAL ROOT (unified recipe-card style modals injected here) -->
  <div id="modal-root">
    <!-- JS will inject modals here -->
  </div>

  <!-- Section renderer scripts (extracted from inline) -->
  <script defer src="recipes/recipes.js"></script>
  <script defer src="pantry/pantry.js"></script>
  <script defer src="meals/meals.js"></script>

</body>
</html>
